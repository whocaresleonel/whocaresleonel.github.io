<html data-theme="dark">
  <head>
    <title>BuildNow GG</title>
    <link rel="stylesheet" href="game-loader/gameloader2020.css" />
    <script src="game-loader/gameloader2020.js"></script>
    <script src="game-loader/gameloader-helper.js"></script>
    <link href="style/daisyui.min.css" rel="stylesheet" type="text/css" />
    <link href="style/fontawesome.min.css" rel="stylesheet" type="text/css" />
    <script src="scripts/tailwindcss.js"></script>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body>
    <div class="game">
      <div id="game-container">
        <canvas id="canvas"></canvas>
      </div>

      <div id="loadingBlock" class="">
        <!-- Loading screen area (fuzzy start) -->
        <div class="jss1 flex items-center justify-center bg-base-100 text-base-content">
          <div class="items-center justify-center gap-10 bg-base-200 p-5 rounded-xl shadow-md">
            <!-- Loader Logo -->
            <div class="flex btn btn-ghost text-3xl bg-base-100">
              <span class="text-success">BUILD</span>
              <span class="text-info">NOW</span>
              <span class="text-primary">GG</span>
            </div>

            <!-- Loading Status -->
            <div class="flex flex-col items-center justify-center mt-6">
              <div class="gameloader-progressbar invisible">
                <div class="gameloader-progressbar-progress" style="width: 100%"></div>
              </div>
              <progress id="loadingBar" class="progress w-56" value="100" max="100"></progress>
              <div id="loadingText" class="gameloader-progress-info neutral-content mt-4">Game Loading...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Bar -->
      <div class="bg-base-200 z-0 absolute bottom-0 left-0 right-0 h-[60px] select-none box-content">
        <div class="flex justify-between items-center h-full w-full">
          <!-- Bar logo -->
          <div class="flex btn btn-ghost text-1xl">
            <span class="text-success">BUILD</span>
            <span class="text-info">NOW</span>
            <span class="text-primary">GG</span>
          </div>

          <!-- Bar icons -->
            <button id="themeButton" class="btn btn-ghost">
              <i id="lightIcon" class="fa-solid fa-sun fill-current hidden"></i>
              <i id="darkIcon" class="fa-solid fa-moon fill-current"></i>
            </button>
            <button id="fullScreenButton" class="btn btn-ghost" aria-label="Toggle fullscreen">
              <i class="fa-solid fa-expand"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Hidden Jaz -->
      <div id="game-footer-logo-url" class="invisible"></div>
      <div id="game-footer-more-url" class="invisible"></div>
      <div class="gameloader-game-name invisible"></div>
    </div>

    <!-- Compatibility / Fallback Popup -->
    <div
      id="compatPopup"
      role="dialog"
      aria-modal="true"
      aria-labelledby="compatPopupTitle"
      aria-describedby="compatPopupDesc"
      class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4"
    >
      <div class="bg-base-200 text-base-content rounded-lg shadow-lg max-w-lg w-full">
        <div class="p-6">
          <h2 id="compatPopupTitle" class="text-xl font-bold mb-2">Need help?</h2>
          <p id="compatPopupDesc" class="mb-4">
            If this doesn't work go to
            <a
              href="https://frylight.jumpingcrab.com/&?q=BuildNow%20GG"
              target="_blank"
              rel="noopener noreferrer"
              class="link link-primary"
            >https://frylight.jumpingcrab.com/&?q=BuildNow%20GG</a>
          </p>

          <div class="flex justify-end gap-3">
            <a
              href="https://whocaresleonel.jumpingcrab.com/&?q=BuildNow%20GG"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-outline"
            >
              Open link
            </a>
            <button id="popupDismissBtn" class="btn btn-primary">no im fine</button>
          </div>
        </div>
      </div>
    </div>

    <script src="scripts/index.js"></script>
    <script type="text/javascript">
      var options = {
        author: "Vseigru, cloudirector",
        gameName: "BuildNow GG",
        locale: "en_US",
        allowFullscreen: true,
        loaderOptions: {
          unityLoaderUrl: "Build/BuildNow.loader.js",
          unityConfigOptions: {
            dataUrl: "Build/BuildNow.data",
            frameworkUrl: "Build/BuildNow.framework.js",
            codeUrl: "Build/BuildNow.wasm",
          },
        },
      };
      GameInit.load(options);
    </script>

    <script type="text/javascript">
      (function () {
        // Popup element and dismiss button
        var popup = document.getElementById("compatPopup");
        var dismissBtn = document.getElementById("popupDismissBtn");

        // Show popup on load (it's present by default). If you prefer it hidden first, add a hidden class in HTML and call popup.classList.remove('hidden') here.
        // Dismiss handler
        function dismissPopup() {
          if (!popup) return;
          // add a fade out if you want; simple remove for now
          popup.style.display = "none";
        }

        // Attach click handler
        if (dismissBtn) {
          dismissBtn.addEventListener("click", function (e) {
            e.preventDefault();
            dismissPopup();
          });
        }

        // Also dismiss when backdrop is clicked (but not when clicking the dialog)
        if (popup) {
          popup.addEventListener("click", function (e) {
            if (e.target === popup) {
              dismissPopup();
            }
          });
        }

        // Optional: if the user presses Escape, dismiss popup
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape") {
            dismissPopup();
          }
        });
      })();
    </script>
  </body>
</html>